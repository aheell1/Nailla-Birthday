<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lily Jump</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(180deg, #f5f0e6, #fffaf4);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Poppins', sans-serif;
    }

    h2#instructions {
      font-size: 22px;
      margin-bottom: 12px;
      padding: 6px 14px;
      border-radius: 20px;
      background: rgba(210, 180, 140, 0.2);
      color: #7b2cbf;
      font-weight: 600;
      letter-spacing: 1px;
      text-align: center;
    }

    #gameArea {
      position: relative;
      width: 400px;
      height: 500px;
      background: #fffaf4;
      border: 3px solid #d2b48c;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    /* Water area */
    #water {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 80px;
      background: #4da6ff;
    }

    .frog {
      position: absolute;
      bottom: 140px;
      left: 180px;
      font-size: 42px;
    }

    .pad {
      position: absolute;
      width: 100px;
      height: 20px;
      border-radius: 10px;
      background: #8fcf7f;
    }

    /* Popup */
    #popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(245,240,230,0.95);
      border: 2px solid #d2b48c;
      padding: 30px 50px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0px 4px 20px rgba(0,0,0,0.2);
      z-index: 10;
    }
    #popup button {
      margin-top: 15px;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background: #d2b48c;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    #popup button:hover {
      background: #c1a177;
    }

    /* Continue button (purple with arrow) */
    #continueBtn {
      margin-top: 15px;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background: #7b2cbf; /* purple */
      color: white;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    #continueBtn:hover {
      background: #6920a8;
    }
  </style>
</head>
<body>
  <h2 id="instructions">Use ‚Üê ‚Üë ‚Üí keys or tap to jump & move üê∏</h2>

  <div id="gameArea">
    <div class="frog" id="frog">üê∏</div>
    <div id="water"></div>

    <div id="popup">
      <h2 id="popupMsg">NAILLA GIR GAYI ü•π</h2>
      <button onclick="restart()">Play Again</button>
    </div>
  </div>

  <!-- Always visible continue button -->
  <button id="continueBtn" onclick="goToFinal()">
    Continue ‚û°
  </button>

  <script>
    const gameArea = document.getElementById("gameArea");
    const frog = document.getElementById("frog");
    const popup = document.getElementById("popup");
    const popupMsg = document.getElementById("popupMsg");

    const GAME_W = 400;
    let vy = 0, gravity = 0.6, isJumping = false, running = true;
    let vx = 0, frogX = 180;
    let pads = [];

    function createPad(x, y) {
      const pad = document.createElement("div");
      pad.className = "pad";
      pad.style.left = x + "px";
      pad.style.bottom = y + "px";
      gameArea.appendChild(pad);
      pads.push({ el: pad, x, y, w: 100 });
    }

    function initGame() {
      pads.forEach(p => p.el.remove());
      pads = [];
      createPad(150, 120);
      createPad(50, 220);
      createPad(220, 320);
      createPad(150, 420); // last pad
      frog.style.bottom = "140px";
      frogX = 180;
      frog.style.left = frogX + "px";
      vy = 0;
      vx = 0;
      isJumping = false;
      running = true;
      popup.style.display = "none";
    }

    function jump() {
      if (!running) return;
      if (!isJumping) {
        vy = 12;
        isJumping = true;
      }
    }

    function moveLeft() {
      vx = -4;
    }
    function moveRight() {
      vx = 4;
    }
    function stopX() {
      vx = 0;
    }

    function gameOver(message) {
      running = false;
      popupMsg.textContent = message;
      popup.style.display = "block";
    }

    function restart() {
      initGame();
      requestAnimationFrame(loop);
    }

    function goToFinal() {
      window.location.href = "final.html";
    }

    function loop() {
      if (!running) return;

      let frogBottom = parseFloat(frog.style.bottom);
      vy -= gravity;
      frogBottom += vy;
      frogX += vx;

      // boundaries
      if (frogX < 0) frogX = 0;
      if (frogX > GAME_W - 40) frogX = GAME_W - 40;

      if (frogBottom < 80) { // fell in water
        gameOver("NAILLA GIR GAYI ü•π");
      }

      frog.style.bottom = frogBottom + "px";
      frog.style.left = frogX + "px";

      // check landing
      const frogMidX = frogX + frog.offsetWidth / 2;
      const frogY = frogBottom;

      for (let p of pads) {
        const padY = parseFloat(p.el.style.bottom);
        if (frogY <= padY + 25 && frogY >= padY - 5) {
          if (frogMidX > p.x && frogMidX < p.x + p.w) {
            isJumping = false;
            vy = 0;
            frog.style.bottom = padY + 25 + "px";

            // last pad = win
            if (padY >= 420) {
              gameOver("You made it to Pakistan ü™ª");
            }
          }
        }
      }

      requestAnimationFrame(loop);
    }

    // Controls
    window.addEventListener("keydown", e => {
      if (e.code === "Space" || e.code === "ArrowUp") jump();
      if (e.code === "ArrowLeft") moveLeft();
      if (e.code === "ArrowRight") moveRight();
    });
    window.addEventListener("keyup", e => {
      if (e.code === "ArrowLeft" || e.code === "ArrowRight") stopX();
    });

    // Tap for jump
    gameArea.addEventListener("click", jump);

    initGame();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
